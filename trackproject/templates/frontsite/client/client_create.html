{% extends 'projectsite/base.html' %}
{% load static %}
{% load bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_javascript %}
{% block title %}Create Client{% endblock %}

{% block content %}
<div class="container-fluid create well table-responsive " style="margin-left:25em; width:700px; margin-top:4em">
    <div class="ms-2 ">
        <h2 class="text-center" style="color:black;">Register  Page</h2>

        {% if form.errors %}
    <div class="alert alert-warning">
        <ul>
            {% for field in form %}
                {% for error in field.errors %}
                    <li>{{ field.label }}: {{ error }}</li>
                {% endfor %}
            {% endfor %}
        </ul>
    </div>
 {% endif %}

        <form method="post" enctype="multipart/form-data" autocomplete="off" class="mx-3">
            {% csrf_token %}
          
            <div class="row mb-3">
                <label for="id_username" class="col-12 col-md-6">Username:</label>
                <div class="input-group ">
                    {{ form.username }}
                </div>
            </div>
            <div class="row mb-3">
                <label for="id_email" class="col-12 col-md-6 ">Email:</label>
                <div class="input-group">
                    {{ form.email }}
                </div>
            </div>
            <!-- Password Field -->
            <div class="row mb-3">
                <label for="id_password1" class="col-12 col-md-6">Password:</label>
                <div class="input-group">
                {{ form.password1 }}
                <span class="input-group-text" onclick="togglePassword('password1', 'toggleIcon1')">
                    <i class="bi bi-eye-slash" id="toggleIcon1"></i>
                </span>
                </div>
            </div>
            

           
            <div class="row mb-3">
                <label for="id_password2" class="col-12 col-md-6 ">Confirm Password:</label>
                <div class="input-group">
                {{ form.password2 }}
                <span class="input-group-text" onclick="togglePassword('password2', 'toggleIcon2')">
                    <i class="bi bi-eye-slash" id="toggleIcon2"></i>
                </span>
                </div>
            </div>
            
            <div class="row mb-3">
                <label for="id_role" class="col-12 col-md-6 ">Role:</label>
                <div class="input-group">
                    {{ form.role }}
                </div>
            </div>

            <div class="row mb-3">
                <label for="id_phone_number" class="col-12 col-md-6 ">Phone Number:</label>
                <div class="input-group " style="margin-top: 5px;">
                    {{ form.phone_number }}
                </div>
            </div>

           

            <div class="row mb-3">
                <label for="id_site_location" class="col-12 col-md-6 col-form-label">Site Location:</label>
                <div class="input-group">
                    {{ form.site_location }}
                </div>
            </div>

            <div class="row mb-3">
                <label for="id_site_name" class="col-12 col-md-6 col-form-label">Site Name:</label>
                <div class="input-group" >
                    {{ form.site_name }}
                </div>
            </div>

            <div class="row mb-3">
                <label for="id_project_start_date" class="col-12 col-md-6 col-form-label">Project Start Date:</label>
                <div class="input-group" >
                    {{ form.project_start_date }}
                </div>
            </div>

            <div class="row mb-3">
                <label for="id_project_end_date" class="col-12 col-md-6 col-form-label">Project End Date:</label>
                <div class="input-group" >
                    {{ form.project_end_date }}
                </div>
            </div>

            <div class="text-center">
                <button type="submit" class="btn btn-primary text-bold px-4 fs-5 mb-3">Save</button>
            </div>
        </form>
    </div>
</div>

<script>
    

        // Get the current date in the required format (YYYY-MM-DD)
        const today = new Date().toISOString().split('T')[0];

        // Set the 'min' attribute dynamically to hide past dates
        document.getElementById('id_project_start_date').setAttribute('min', today);
        document.getElementById('id_project_end_date').setAttribute('min', today);
  
    $(document).ready(function () {
        // Hides the message after 5 seconds (5000ms)
            $('.alert').hide(10000);
        });
        document.addEventListener("DOMContentLoaded", function () {
            function setupToggle(fieldId, iconId) {
                let passwordField = document.getElementById(fieldId);
                let icon = document.getElementById(iconId);
        
                if (passwordField && icon) {
                    icon.addEventListener("click", function () {
                        if (passwordField.type === "password") {
                            passwordField.type = "text";
                            icon.classList.remove("bi-eye-slash");
                            icon.classList.add("bi-eye");
                        } else {
                            passwordField.type = "password";
                            icon.classList.remove("bi-eye");
                            icon.classList.add("bi-eye-slash");
                        }
                    });
                }
            }
        
            setupToggle("password1", "toggleIcon1");
            setupToggle("password2", "toggleIcon2");
        });
        
</script>

<!-- Bootstrap Icons CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

{% endblock %}
